<!-- loading_page.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loading...</title>
</head>
<body>
    <h1>음악 생성 중...</h1>
    <p>잠시만 기다려 주세요.</p>

    <script>
        setInterval(function() {
            fetch("{% url 'check_pipeline_status' %}")
            .then(response => response.json())
            .then(data => {
                if (data.pipeline_completed) {
                    window.location.href = "{% url 'result_page' %}";
                } else if (data.pipeline_error) {
                    window.location.href = "{% url 'error_page' %}";
                }
            });
        }, 5000); // 5초마다 서버 상태 확인
    </script>
</body>
</html>